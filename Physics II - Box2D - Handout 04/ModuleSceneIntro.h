#pragma once
#include "Module.h"
#include "p2List.h"
#include "p2Point.h"
#include "Globals.h"

class PhysBody;

class ModuleSceneIntro : public Module
{
public:
	ModuleSceneIntro(Application* app, bool start_enabled = true);
	~ModuleSceneIntro();

	bool Start();
	update_status Update();
	bool CleanUp();
	void OnCollision(PhysBody* bodyA, PhysBody* bodyB);

public:
	p2List<PhysBody*> circles;
	
	p2List<PhysBody*> hitbox;

	PhysBody* sensor;
	bool sensed;

	SDL_Texture* background;
    SDL_Texture* circle;
	
	uint bonus_fx;
	p2Point<int> ray;
	bool ray_on;

	// Pivot 0, 0
	int hitbox2[166] = {
		0, -1,
		0, 425,
		96, 425,
		94, 419,
		37, 387,
		38, 400,
		22, 400,
		22, 326,
		25, 317,
		30, 315,
		40, 313,
		41, 306,
		41, 291,
		31, 277,
		20, 258,
		13, 239,
		7, 214,
		6, 188,
		8, 166,
		9, 143,
		12, 110,
		21, 86,
		33, 68,
		48, 54,
		65, 45,
		76, 40,
		90, 36,
		107, 28,
		123, 24,
		134, 21,
		145, 19,
		165, 17,
		173, 17,
		221, 18,
		231, 23,
		239, 29,
		245, 39,
		249, 50,
		250, 61,
		251, 410,
		233, 410,
		229, 100,
		226, 81,
		220, 65,
		211, 51,
		199, 43,
		180, 38,
		167, 36,
		146, 38,
		128, 44,
		137, 51,
		147, 58,
		152, 68,
		165, 73,
		176, 79,
		185, 85,
		195, 93,
		203, 103,
		211, 113,
		218, 126,
		222, 143,
		223, 158,
		224, 173,
		224, 193,
		223, 211,
		221, 228,
		218, 243,
		213, 256,
		206, 270,
		199, 280,
		193, 289,
		193, 313,
		206, 312,
		211, 314,
		215, 318,
		217, 325,
		216, 401,
		196, 401,
		195, 391,
		141, 425,
		254, 426,
		254, 0,
		7, 0
	};
	// Background
	int hitbox1[146] = {
		98, 422,
		38, 388,
		38, 400,
		21, 400,
		22, 327,
		28, 319,
		42, 319,
		45, 312,
		44, 287,
		35, 279,
		27, 263,
		15, 238,
		8, 208,
		10, 177,
		11, 170,
		10, 144,
		10, 123,
		14, 104,
		21, 87,
		37, 63,
		52, 51,
		63, 46,
		80, 40,
		91, 35,
		112, 27,
		127, 25,
		145, 20,
		162, 18,
		186, 18,
		208, 17,
		223, 20,
		235, 26,
		244, 36,
		249, 49,
		250, 64,
		250, 81,
		249, 97,
		248, 409,
		234, 411,
		229, 98,
		226, 77,
		222, 56,
		209, 46,
		190, 40,
		172, 36,
		161, 36,
		148, 38,
		126, 44,
		144, 54,
		152, 66,
		164, 72,
		178, 77,
		194, 87,
		206, 102,
		214, 116,
		221, 141,
		223, 162,
		224, 189,
		226, 208,
		223, 233,
		216, 248,
		206, 269,
		192, 287,
		190, 312,
		193, 316,
		202, 317,
		211, 321,
		213, 328,
		214, 340,
		213, 397,
		198, 400,
		197, 388,
		140, 423
	};
};
